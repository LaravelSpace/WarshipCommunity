# 动态规划

## 核心思想

动态规划（Dynamic Programming）的核心思想就是把一个大的问题进行拆分，细分成一个个小的子问题，且能够从这些小的子问题的解推导出原问题的解。

## 基本性质

- **最优子结构性质：**如果问题的最优解所包含的子问题的解也是最优的，我们就称该问题具有最优子结构性质（即满足最优化原理）。最优子结构性质为动态规划算法解决问题提供了重要线索。
- **无后效性：**即子问题的解一旦确定，就不再改变，不受在这之后、包含它的更大的问题的求解决策影响。
- **子问题重叠性质：**子问题重叠性质是指在用递归算法自顶向下对问题进行求解时，每次产生的子问题并不总是新问题，有些子问题会被重复计算多次。动态规划算法正是利用了这种子问题的重叠性质，对每一个子问题只计算一次，然后将其计算结果保存在一个表格中，当再次需要计算已经计算过的子问题时，只是在表格中简单地查看一下结果，从而获得较高的效率。

## 动态规划的一般步骤

1. **划分阶段：**按照问题的时间或空间特征，把问题分为若干个阶段。在划分阶段时，注意划分后的阶段一定要是有序的或者是可排序的，否则问题就无法求解。
2. **确定状态和状态变量：**将问题发展到各个阶段时所处于的各种客观情况用不同的状态表示出来。当然，状态的选择要满足无后效性。
3. **确定决策并写出状态转移方程：**因为决策和状态转移有着天然的联系，状态转移就是根据上一阶段的状态和决策来导出本阶段的状态。所以如果确定了决策，状态转移方程也就可写出。但事实上常常是反过来做，根据相邻两个阶段的状态之间的关系来确定决策方法和状态转移方程。
4. **寻找边界条件：**给出的状态转移方程是一个递推式，需要一个递推的终止条件或边界条件。

## 举个例子

设：有 n 级台阶，每次上一级台阶或者两级台阶。
问：有多少种方法走完 n 级台阶？

通过分析，可以发现这样一个规律：
n = 0 时，f(0) = 0;
n = 1 时，f(1) = 1;
n = 2 时，f(2) = 2;
n > 2 时，f(n) = f(n - 2) + f(n - 1);
总结为：走到 n 级台阶的方式数为走到 n-1 级台阶的方式数与走到 n-2 级台阶的方式数之和。

## 例题总结

动态规划的关键步骤就是找到子问题和原问题的变化关系。在这个例子中，当 n > 2 时，f(n) = f(n - 2) + f(n - 1)。这个就是本题需要找到的变化关系。通过这个关系很容易就可以设计出递归算法。但需要注意的是，虽然递归算法可以求解，但是效率不一定最佳。可以通过记录中间数据简化递归算法，不用对同一个子问题重复求解。当然还可以通过子问题和原问题之间的关系，构造正向求解的结构（通常是数列或者矩阵）。

比如假设本题的 n = 5。那么递归的求解步骤就是：f(5) = f(3) + f(4) = f(1) + f(2) + f(2) + f(3) = f(1) + f(2) + f(2) + f(1) + f(2)。这个结构其实可以正向求解。根据题目的意思可以很容易的得到：f(1) = 1;f(2) = 2; 然后根据递推关系依次计算 f(3)，f(4)，f(5) 就行了。

## 实际应用时的一般步骤

实际应用中可以按以下几个简化的步骤进行设计：
1. 分析最优解，得到递推关系。
2. 根据递推关系设计递归算法。
3. 根据递归算法，简化求解的结构。

## 参考

- [算法思想之动态规划(一)——绪论](https://www.jianshu.com/p/3d959834e83d)